<!DOCTYPE html>
<html>
<head>
  <title>Anonymous Posting</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    textarea { width: 100%; height: 100px; }
    .post { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; }
  </style>
</head>
<body>
  <h2>Anonymous Wall</h2>
  <form id="postForm">
    <textarea id="postText" placeholder="Type something..." required></textarea><br>
    <button type="submit">Post</button>
  </form>
  <div id="posts"></div>

  <script>
    // âœ… Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCcjYypgcseE1v-IJww5GCRZDFqZnwuYI4",
      authDomain: "anounypost.firebaseapp.com",
      databaseURL: "https://anounypost-default-rtdb.firebaseio.com",
      projectId: "anounypost",
      storageBucket: "anounypost.firebasestorage.app",
      messagingSenderId: "1069045923880",
      appId: "1:1069045923880:web:c6c2d0d05126e59ba2351d",
      measurementId: "G-BZBQV4WDPT"
    };

    // ðŸ”Œ Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ðŸ“¨ Submit post
    document.getElementById("postForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const text = document.getElementById("postText").value.trim();
      if (text) {
        db.ref("posts").push({
          content: text,
          timestamp: Date.now()
        });
        document.getElementById("postText").value = "";
      }
    });

    // ðŸ“¥ Load posts in real-time
    db.ref("posts").on("value", function(snapshot) {
      const postsDiv = document.getElementById("posts");
      postsDiv.innerHTML = "";
      const data = snapshot.val();
      if (data) {
        const entries = Object.entries(data).sort((a, b) => b[1].timestamp - a[1].timestamp);
        entries.forEach(([id, post]) => {
          const div = document.createElement("div");
          div.className = "post";
          div.textContent = post.content;
          postsDiv.appendChild(div);
        });
      }
    });
  </script>
</body>
</html>
